import{ax as r,al as o,z as i,A as l,bn as s,Q as t}from"./chunks/framework.xLrphOOr.js";const T=JSON.parse('{"title":"事件循环与事件","description":"","frontmatter":{},"headers":[],"relativePath":"python/tkinter/eventloop.md","filePath":"python/tkinter/eventloop.md","lastUpdated":1765719897000}'),p={name:"python/tkinter/eventloop.md"};function c(d,e,h,_,m,k){const n=o("NolebaseGitContributors"),a=o("NolebaseGitChangelog");return l(),i("div",null,[e[0]||(e[0]=s('<h1 id="事件循环与事件" tabindex="-1">事件循环与事件 <a class="header-anchor" href="#事件循环与事件" aria-label="Permalink to “事件循环与事件”">​</a></h1><h2 id="什么是事件循环" tabindex="-1">什么是事件循环 <a class="header-anchor" href="#什么是事件循环" aria-label="Permalink to “什么是事件循环”">​</a></h2><p>对于 GUI 应用程序，事件循环是其重要组成部分。</p><p>众所周知，Python 代码是按行解释执行的，这一过程是在单线程中执行的。如果一切正常的话，Python 脚本按行执行下去，几十行代码很快就会结束，程序将会退出。</p><p>然而，我们刚刚观察到，只有在我们手动关闭 Tkinter Hello 窗口之后，Python 解释器才终于退出。这是因为在代码中，我们使用 <code>root.mainloop()</code> 进入了 Tkinter 的事件循环。</p><p>在事件循环中，Tkinter 暂时性地「阻塞」了我们编写的 Python 代码，开始维护我们编写的 GUI 给用户使用，处理用户的输入并进行相应的响应，并且时刻向操作系统汇报我们的程序仍然存活。只有在用户关闭了我们的 Tkinter Hello 窗口之后，代码才得以从 <code>root.mainloop()</code> 继续执行下去，也即程序才退出。</p><p>调用的方法 <code>mainloop()</code> 正是「<strong>主循环</strong>」之意义。</p><h2 id="tkinter-事件循环" tabindex="-1">Tkinter 事件循环 <a class="header-anchor" href="#tkinter-事件循环" aria-label="Permalink to “Tkinter 事件循环”">​</a></h2><p>运行 <code>mainloop()</code> 时，Python 解释器的主线程会维护一个事件循环。你可以把它理解为一个更加优雅的 <code>while True</code> 循环。</p><p>每一次循环，Python 都会处理 GUI 更新，比如：</p><ul><li>用户的鼠标移动到了哪个控件上：绘制控件的悬停状态（按钮）；</li><li>用户的鼠标点击了哪个控件：绘制控件的按下状态（按钮）、执行控件绑定的点击命令（按钮的 <code>command</code>）；</li><li>用户在键盘上输入了哪个按键：接收键盘输入事件，判断是否有与输入的按键绑定的命令需要执行；</li><li>用户的鼠标拖动了窗口：在拖动时持续重新绘制窗口，让窗口跟随用户的鼠标移动……</li><li>用户点击了窗口的最小化、最大化、关闭按钮：将窗口最小化、最大化、关闭。</li></ul><p>这是在一个线程中执行的，我们称之为 Tkinter 主线程。</p><p>显然，<strong>如果主线程阻塞</strong>（执行耗时长的任务时），意味着<strong>事件循环阻塞</strong>，意味着我们的 <strong>GUI 无法得到更新</strong>。此时，操作系统会判断我们的程序「<strong>无响应</strong>」，并在持续一定时间之后建议用户<strong>结束进程</strong>。因为对操作系统来说，它无从得知未响应的程序到底是什么情况，是在执行任务还是单纯卡死惹。</p><p>了解了事件循环之后，接下来我们就可以让我们的 Tkinter 程序具备执行任务的能力了。</p>',14)),t(n),t(a)])}const b=r(p,[["render",c]]);export{T as __pageData,b as default};
