import{ax as l,al as i,z as t,A as p,bn as h,Q as a,br as d}from"./chunks/framework.xLrphOOr.js";const u=JSON.parse('{"title":"Git","description":"","frontmatter":{},"headers":[],"relativePath":"common/git.md","filePath":"common/git.md","lastUpdated":1765170707000}'),r={name:"common/git.md"};function k(c,s,g,o,b,F){const e=i("NolebaseGitContributors"),n=i("NolebaseGitChangelog");return p(),t("div",null,[s[0]||(s[0]=h('<h1 id="git" tabindex="-1">Git <a class="header-anchor" href="#git" aria-label="Permalink to “Git”">​</a></h1><p>git 是一个分布式版本控制软件，其作者是 Linus，没错就是那个 Linux 的 Linus。</p><p>git 最初是为开发 Linux 内核时的版本管理而设计的，用以取代其他的闭源方案。如今，成熟的 IDE 如 VSCode 和 JetBrains IDEs 均已经内建对 git 的支持，这使得我们无需记住所有繁琐的 git 命令，也能熟练地使用 git 进行项目的版本控制。</p><h2 id="git-基本工作流程" tabindex="-1">git 基本工作流程 <a class="header-anchor" href="#git-基本工作流程" aria-label="Permalink to “git 基本工作流程”">​</a></h2><p>首先，git 是用于项目管理的版本控制软件，因此你需要在一个项目中使用 git。</p><h3 id="创建仓库" tabindex="-1">创建仓库 <a class="header-anchor" href="#创建仓库" aria-label="Permalink to “创建仓库”">​</a></h3><p>你可以将你已有的本地项目使用 git 管理，只需要在项目根目录下建立 git 仓库。</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> init</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>或者，也可以从在线仓库克隆，这会在你的本地创建一个与在线仓库一模一样的仓库，包括仓库的完整历史记录。</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ur</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">l</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [path]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><code>[path]</code> 是可选的，如果不提供的话则会克隆到当前目录下。例如，若仓库的名称为 <code>Code</code>，运行 <code>git clone &lt;url&gt;</code> 会将仓库克隆到当前目录下的 <code>Code</code> 子目录中；运行 <code>git clone &lt;url&gt; path/to/Code</code> 则会将仓库克隆到 <code>path/to/Code</code> 中。</p><h3 id="分支" tabindex="-1">分支 <a class="header-anchor" href="#分支" aria-label="Permalink to “分支”">​</a></h3><p>一个 git 仓库可以有多个分支（branch）。</p><p>在最佳实践中，我们建议每个仓库都至少保有两个分支：主分支往往名为 <code>main</code> 或 <code>master</code>，另外设置一个开发分支 <code>dev</code>。每一条分支都是仓库的一个副本，包含仓库内的所有文件。</p><p>你可以使用 <code>checkout</code> 命令切换当前分支，此命令又名「签出」。在 git 2.23 版本及以后，可以使用新的 <code>switch</code> 命令切换分支。</p><p>这样表述可能又抽象了，举例说明：</p><p>你手中的项目是一个软件的源代码仓库，拥有 <code>main</code> 和 <code>dev</code> 两个分支，其中 <code>main</code> 是已发布的正式版本的代码，而 <code>dev</code> 是正在开发新功能的代码。</p><p>如果需要构建该软件的稳定版本，那么你需要在 <code>main</code> 分支下执行构建，由于此时仓库中的所有代码都是正式版本的代码，因此你将构建出该软件的正式版本。</p><p>如果需要构建最新的开发版本（尝鲜嘛），那么你需要在 <code>dev</code> 分支下执行构建，此时构建得到的软件会包含 <code>dev</code> 中正在开发的新功能。</p><p>对于开发软件的人来说同理。新的代码永远被首先写在 <code>dev</code> 分支中，在完成新版本的所有功能开发之后，将 <code>dev</code> 分支合并到 <code>main</code> 分支，让 <code>main</code> 成为新的正式版本，然后 <code>dev</code> 可以继续用于开发下一个版本。</p><p><img src="'+d+`" alt="git 分支" data-zoomable="true"></p><p>分支功能是 git 与众不同的特色功能，其强大在仓库中的每一个分支都可以进行修改。还是以刚才的例子为例，如果 <code>dev</code> 分支的新版本正开发到一半时，软件 <code>main</code> 分支上的最新正式版代码被发现了严重漏洞，必须立刻进行修复的话……</p><p>可以在 <code>dev</code> 分支内进行修复，但是由于新版本只开发到一半，不可能把半成品合并到 <code>main</code> 分支内让所有用户都用只开发到一半的软件吧？所以需要在 <code>main</code> 分支内直接进行漏洞修复，然后就地发布新版本。</p><p>此时，<code>main</code> 分支与 <code>dev</code> 分支之间就出现了分叉，日后当 <code>dev</code> 的新版本终于开发完毕时，再将 <code>dev</code> 合并到 <code>main</code> 的时候就可能会出现冲突。git 会自动解决可以解决的部分冲突，剩余的需要你来进行定夺。</p><p>可以使用以下命令切换分支，两种命令效果是等价的：</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 切换到 main 分支</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> checkout</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> main</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> switch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> main</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 切换到 dev 分支</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> checkout</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> switch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> main</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>可以使用如下命令创建新分支，新分支的状态完全基于当前分支。</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> checkout</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -b</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> new_branch_name</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> switch</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> new_branch_name</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>可以使用如下命令查看当前仓库的所有分支。加 <code>*</code> 符号的是当前分支。</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> branch</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="提交" tabindex="-1">提交 <a class="header-anchor" href="#提交" aria-label="Permalink to “提交”">​</a></h3><p>git 会管理仓库中所有已添加的文件的历史记录，这是基于被称为「提交」（commit）的操作进行的。</p><p>提交是由你（程序员）执行的操作，意味着你完成了对代码的修改，并将这些修改提交给当前分支。提交时可以附带一些消息（Message），这些消息会在仓库的 commit 历史中被记录，并显示。</p><p>在此之前，我们需要先了解如何让 git 管理我们的代码文件。刚创建的新仓库是空白仓库，其中没有任何文件，你需要首先告诉 git 哪些文件需由仓库管理，告诉的方式就是：</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>此命令会将目录下的所有文件都添加（add）到 git 的<strong>暂存区</strong>中。暂存区是一个由 git 管理的中间状态，在暂存区中的文件会被提交到分支中。git 会追踪暂存区中的所有文件的变化，包括你在他们中增加、删除、编辑代码。git 也会尝试追踪文件名的变化，例如文件的重命名和移动。</p><p>如果不想添加所有文件，可以：</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 添加名为 filename 的文件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> filename</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 添加所有后缀为 .js 的文件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.js</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>将一个文件添加到暂存区之后，你仍然可以继续编辑这个文件，无需在编辑之后再重复添加。换言之，将文件添加到暂存区之后，git 就已经开始矜矜业业地追踪其变化了，无需你再操心。</p><p>然后，只要在编辑告一段落之后运行提交命令，这会将暂存区中的所有文件都提交到当前分支。提交之后，当前分支会被更新，你可以在分支的历史记录中找到这次提交。</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 提交暂存区中的所有文件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> commit</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 建议附带提交消息</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> commit</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;commit_message&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>你不应该在暂存区存在内容时签出分支，这会导致暂存区被重置，同时可能引发奇怪的冲突。</p><p>如果添加错文件了，可以一键重置，或者从中移除指定的文件。</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 重置暂存区。HEAD 指代的是仓库的当前分支，此命令即将暂存区重置为当前分支</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reset</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> HEAD</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 或者从暂存区中移除文件 filename</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --cache</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> filename</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="推送与拉取" tabindex="-1">推送与拉取 <a class="header-anchor" href="#推送与拉取" aria-label="Permalink to “推送与拉取”">​</a></h3><p>以上操作都发生在我们的本地，而 git 仓库中可以存在本地分支和远程分支。本地分支位于我们本地，而远程分支则位于服务器。</p><p>如果你的仓库是使用 <code>git clone &lt;url&gt;</code> 克隆到本地的，那么远程分支已经存在于仓库中。</p><p>如果你的仓库是使用 <code>git init</code> 创建的，那么需要使用 <code>git remote</code> 命令来设置远程仓库。</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> remote</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">remote_nam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">remote_ur</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">l</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>一般而言，<code>remote_name</code> 被设置为 <code>origin</code>，便于记忆。一般来说，远程仓库和本地仓库的分支情况是完全一致的，省事。</p><p>然后，可以使用 <code>git pull</code> 和 <code>git push</code> 来拉取、推送更新。</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 从远程仓库获取 [branch_name] 的更新</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pull</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> origin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [branch_name]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 如果不提供 [branch_name] 则获取所有分支的更新</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pull</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> origin</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 将本地仓库 branch_name 分支的更新推送到远程仓库的 branch_name 分支。</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> push</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> origin</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">branch_nam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="在-ide-中使用-git" tabindex="-1">在 IDE 中使用 git <a class="header-anchor" href="#在-ide-中使用-git" aria-label="Permalink to “在 IDE 中使用 git”">​</a></h2><p>IDE 为 git 设计简明易懂的可视化支持，因此一般来说无需清除地记住所有的命令。</p><h3 id="jetbrains-ides" tabindex="-1">JetBrains IDEs <a class="header-anchor" href="#jetbrains-ides" aria-label="Permalink to “JetBrains IDEs”">​</a></h3><p>JetBrains 的 IDE 均已经内置了对 git 的支持。</p><h3 id="vscode" tabindex="-1">VSCode <a class="header-anchor" href="#vscode" aria-label="Permalink to “VSCode”">​</a></h3>`,57)),a(e),a(n)])}const y=l(r,[["render",k]]);export{u as __pageData,y as default};
